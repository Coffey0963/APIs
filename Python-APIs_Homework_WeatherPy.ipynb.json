{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# WeatherPy\n",
    "----\n",
    "\n",
    "#### Note\n",
    "* Instructions have been included for each segment. You do not have to follow them exactly, but they are included to help you think through the steps."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {
    "scrolled": true
   },
   "outputs": [],
   "source": [
    "# Dependencies and Setup\n",
    "import matplotlib.pyplot as plt\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "import requests\n",
    "import time\n",
    "\n",
    "# Import API key\n",
    "#from api_keys import api_key\n",
    "import api_keys\n",
    "\n",
    "# Incorporated citipy to determine city based on latitude and longitude\n",
    "from citipy import citipy\n",
    "\n",
    "# Output File (CSV)\n",
    "output_data_file = \"output_data/cities.csv\"\n",
    "\n",
    "# Range of latitudes and longitudes\n",
    "lat_range = (-90, 90)\n",
    "lng_range = (-180, 180)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Generate Cities List"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "606"
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# List for holding lat_lngs and cities\n",
    "lat_lngs = []\n",
    "cities = []\n",
    "\n",
    "# Create a set of random lat and lng combinations\n",
    "lats = np.random.uniform(low=-90.000, high=90.000, size=1500)\n",
    "lngs = np.random.uniform(low=-180.000, high=180.000, size=1500)\n",
    "lat_lngs = zip(lats, lngs)\n",
    "\n",
    "# Identify nearest city for each lat, lng combination\n",
    "for lat_lng in lat_lngs:\n",
    "    city = citipy.nearest_city(lat_lng[0], lat_lng[1]).city_name\n",
    "    \n",
    "    # If the city is unique, then add it to a our cities list\n",
    "    if city not in cities:\n",
    "        cities.append(city)\n",
    "\n",
    "# Print the city count to confirm sufficient count\n",
    "len(cities)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Perform API Calls\n",
    "* Perform a weather check on each city using a series of successive API calls.\n",
    "* Include a print log of each city as it'sbeing processed (with the city number and city name).\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [],
   "source": [
    "# WeatherMap API Key\n",
    "api_key = api_keys.api_key\n",
    "# Starting URL for Weather Map API Call\n",
    "url = \"http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=\" + api_key"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Beginning Data Retrieval\n",
      "-------------------------------\n",
      "Processing Record 1 | Saint-Philippe\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=saint-philippe\n",
      "Processing Record 2 | Hilo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=hilo\n",
      "Processing Record 3 | Erenhot\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=erenhot\n",
      "Processing Record 4 | Esperance\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=esperance\n",
      "Processing Record 5 | Ushuaia\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ushuaia\n",
      "Processing Record 6 | Ankang\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ankang\n",
      "Processing Record 7 | Vaini\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=vaini\n",
      "Processing Record 8 | Hermanus\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=hermanus\n",
      "Processing Record 9 | Bluff\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=bluff\n",
      "Processing Record 10 | Likasi\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=likasi\n",
      "Processing Record 11 | Cape Town\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=cape town\n",
      "Processing Record 12 | Trairi\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=trairi\n",
      "Processing Record 13 | Kavaratti\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kavaratti\n",
      "Processing Record 14 | Mar del Plata\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=mar del plata\n",
      "Processing Record 15 | Ciudad Bolivar\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ciudad bolivar\n",
      "Processing Record 16 | Pecos\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=pecos\n",
      "Processing Record 17 | Port Elizabeth\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=port elizabeth\n",
      "Processing Record 18 | Baruun-Urt\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=baruun-urt\n",
      "Processing Record 19 | Tiksi\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=tiksi\n",
      "Processing Record 20 | Tasiilaq\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=tasiilaq\n",
      "Processing Record 21 | Sinnamary\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sinnamary\n",
      "Processing Record 22 | Souillac\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=souillac\n",
      "Processing Record 23 | Homer\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=homer\n",
      "Processing Record 24 | Ribeira Grande\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ribeira grande\n",
      "Processing Record 25 | Pangnirtung\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=pangnirtung\n",
      "Processing Record 26 | Birao\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=birao\n",
      "Processing Record 27 | Rikitea\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=rikitea\n",
      "Processing Record 28 | Kangaatsiaq\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kangaatsiaq\n",
      "Processing Record 29 | New Norfolk\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=new norfolk\n",
      "Processing Record 30 | Dawei\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=dawei\n",
      "Processing Record 31 | Dingle\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=dingle\n",
      "Processing Record 32 | Padang\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=padang\n",
      "City not found. Skipping...\n",
      "Processing Record 33 | Yellowknife\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=yellowknife\n",
      "Processing Record 34 | Albany\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=albany\n",
      "Processing Record 35 | Belgrade\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=belgrade\n",
      "Processing Record 36 | Pevek\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=pevek\n",
      "Processing Record 37 | Leningradskiy\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=leningradskiy\n",
      "Processing Record 38 | Singarayakonda\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=singarayakonda\n",
      "Processing Record 39 | Sedkyrkeshch\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sedkyrkeshch\n",
      "City not found. Skipping...\n",
      "Processing Record 40 | Bredasdorp\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=bredasdorp\n",
      "City not found. Skipping...\n",
      "Processing Record 41 | Gemena\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=gemena\n",
      "Processing Record 42 | Barentu\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=barentu\n",
      "Processing Record 43 | Heilbron\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=heilbron\n",
      "Processing Record 44 | Ca Mau\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ca mau\n",
      "Processing Record 45 | Bilma\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=bilma\n",
      "Processing Record 46 | Uruguaiana\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=uruguaiana\n",
      "Processing Record 47 | Skjervoy\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=skjervoy\n",
      "Processing Record 48 | Nikolskoye\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=nikolskoye\n",
      "Processing Record 49 | Chuy\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=chuy\n",
      "Processing Record 50 | Hithadhoo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=hithadhoo\n",
      "Processing Record 51 | Jamestown\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=jamestown\n",
      "Processing Record 52 | Hobart\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=hobart\n",
      "Processing Record 53 | Busselton\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=busselton\n",
      "Processing Record 54 | Zhigansk\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=zhigansk\n",
      "Processing Record 55 | Yatou\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=yatou\n",
      "Processing Record 56 | Atuona\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=atuona\n",
      "Processing Record 57 | Mataura\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=mataura\n",
      "Processing Record 58 | Dawlatabad\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=dawlatabad\n",
      "Processing Record 59 | Igarka\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=igarka\n",
      "Processing Record 60 | Qaqortoq\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=qaqortoq\n",
      "Processing Record 61 | Tuktoyaktuk\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=tuktoyaktuk\n",
      "Processing Record 62 | Cidreira\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=cidreira\n",
      "Processing Record 63 | Provideniya\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=provideniya\n",
      "Processing Record 64 | Smoky Lake\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=smoky lake\n",
      "Processing Record 65 | Thompson\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=thompson\n",
      "Processing Record 66 | Bambous Virieux\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=bambous virieux\n",
      "Processing Record 67 | Norman Wells\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=norman wells\n",
      "Processing Record 68 | Avarua\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=avarua\n",
      "Processing Record 69 | Coahuayana\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=coahuayana\n",
      "City not found. Skipping...\n",
      "Processing Record 70 | Soyo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=soyo\n",
      "Processing Record 71 | Yumen\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=yumen\n",
      "Processing Record 72 | Ulladulla\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ulladulla\n",
      "Processing Record 73 | Luderitz\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=luderitz\n",
      "Processing Record 74 | Kapaa\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kapaa\n",
      "Processing Record 75 | Karwar\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=karwar\n",
      "Processing Record 76 | Astoria\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=astoria\n",
      "Processing Record 77 | Dikson\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=dikson\n",
      "Processing Record 78 | Excelsior Springs\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=excelsior springs\n",
      "City not found. Skipping...\n",
      "Processing Record 79 | Faya\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=faya\n",
      "Processing Record 80 | Umea\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=umea\n",
      "Processing Record 81 | Puerto Ayora\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=puerto ayora\n",
      "Processing Record 82 | Tsabong\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=tsabong\n",
      "City not found. Skipping...\n",
      "Processing Record 83 | Camacha\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=camacha\n",
      "Processing Record 84 | Faanui\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=faanui\n",
      "Processing Record 85 | Arraial do Cabo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=arraial do cabo\n",
      "Processing Record 86 | Sorland\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sorland\n",
      "Processing Record 87 | Carnarvon\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=carnarvon\n",
      "Processing Record 88 | Qaanaaq\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=qaanaaq\n",
      "Processing Record 89 | Airai\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=airai\n",
      "Processing Record 90 | Palmares\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=palmares\n",
      "Processing Record 91 | Saskylakh\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=saskylakh\n",
      "Processing Record 92 | Georgetown\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=georgetown\n",
      "Processing Record 93 | Tual\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=tual\n",
      "Processing Record 94 | Ponta do Sol\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ponta do sol\n",
      "Processing Record 95 | Amuntai\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=amuntai\n",
      "Processing Record 96 | Ituverava\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ituverava\n",
      "Processing Record 97 | Regina\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=regina\n",
      "Processing Record 98 | Port Blair\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=port blair\n",
      "Processing Record 99 | Thinadhoo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=thinadhoo\n",
      "Processing Record 100 | Saldanha\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=saldanha\n",
      "Processing Record 101 | Upernavik\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=upernavik\n",
      "Processing Record 102 | Mackay\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=mackay\n",
      "Processing Record 103 | Srednekolymsk\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=srednekolymsk\n",
      "Processing Record 104 | Punta Arenas\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=punta arenas\n",
      "Processing Record 105 | Chokurdakh\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=chokurdakh\n",
      "Processing Record 106 | Castro\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=castro\n",
      "Processing Record 107 | Moengo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=moengo\n",
      "Processing Record 108 | Ahipara\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ahipara\n",
      "Processing Record 109 | West Wendover\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=west wendover\n",
      "Processing Record 110 | Port Alfred\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=port alfred\n",
      "Processing Record 111 | Bibiani\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=bibiani\n",
      "Processing Record 112 | Honningsvag\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=honningsvag\n",
      "Processing Record 113 | Chara\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=chara\n",
      "City not found. Skipping...\n",
      "Processing Record 114 | Chapais\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=chapais\n",
      "Processing Record 115 | Pisco\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=pisco\n",
      "Processing Record 116 | Canillo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=canillo\n",
      "Processing Record 117 | Kapit\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kapit\n",
      "City not found. Skipping...\n",
      "City not found. Skipping...\n",
      "Processing Record 118 | Kavieng\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kavieng\n",
      "Processing Record 119 | Cabo San Lucas\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=cabo san lucas\n",
      "Processing Record 120 | Mombetsu\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=mombetsu\n",
      "Processing Record 121 | Butaritari\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=butaritari\n",
      "City not found. Skipping...\n",
      "City not found. Skipping...\n",
      "Processing Record 122 | Buala\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=buala\n",
      "Processing Record 123 | Severo-Kurilsk\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=severo-kurilsk\n",
      "Processing Record 124 | Oranjemund\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=oranjemund\n",
      "Processing Record 125 | Lebu\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=lebu\n",
      "Processing Record 126 | Kununurra\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kununurra\n",
      "Processing Record 127 | Khash\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=khash\n",
      "Processing Record 128 | Coquimbo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=coquimbo\n",
      "Processing Record 129 | Kamaishi\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kamaishi\n",
      "Processing Record 130 | Andijan\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=andijon\n",
      "Processing Record 131 | Abu Samrah\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=abu samrah\n",
      "Processing Record 132 | Darhan\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=darhan\n",
      "Processing Record 133 | Narsaq\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=narsaq\n",
      "Processing Record 134 | Sukhobuzimskoye\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sukhobuzimskoye\n",
      "Processing Record 135 | Chilliwack\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=chilliwack\n",
      "Processing Record 136 | Agadez\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=agadez\n",
      "Processing Record 137 | Ugoofaaru\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ugoofaaru\n",
      "Processing Record 138 | Chimbote\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=chimbote\n",
      "City not found. Skipping...\n",
      "Processing Record 139 | Behbahan\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=behbahan\n",
      "Processing Record 140 | Eagle Pass\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=eagle pass\n",
      "City not found. Skipping...\n",
      "Processing Record 141 | Adrar\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=adrar\n",
      "City not found. Skipping...\n",
      "Processing Record 142 | Victor Harbor\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=victor harbor\n",
      "Processing Record 143 | Mayo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=mayo\n",
      "City not found. Skipping...\n",
      "Processing Record 144 | Morondava\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=morondava\n",
      "Processing Record 145 | Two Rivers\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=two rivers\n",
      "Processing Record 146 | Northam\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=northam\n",
      "Processing Record 147 | Lerwick\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=lerwick\n",
      "Processing Record 148 | Dunedin\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=dunedin\n",
      "Processing Record 149 | Lander\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=lander\n",
      "Processing Record 150 | Malatya\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=malatya\n",
      "Processing Record 151 | Isangel\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=isangel\n",
      "Processing Record 152 | Saint George\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=saint george\n",
      "City not found. Skipping...\n",
      "City not found. Skipping...\n",
      "Processing Record 153 | East London\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=east london\n",
      "Processing Record 154 | Hermiston\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=hermiston\n",
      "Processing Record 155 | Acapulco\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=acapulco\n",
      "Processing Record 156 | Touros\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=touros\n",
      "City not found. Skipping...\n",
      "Processing Record 157 | Anadyr\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=anadyr\n",
      "Processing Record 158 | Grindavik\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=grindavik\n",
      "Processing Record 159 | Taoudenni\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=taoudenni\n",
      "Processing Record 160 | Ormara\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ormara\n",
      "Processing Record 161 | Vale\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=vale\n",
      "Processing Record 162 | Lincoln\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=lincoln\n",
      "Processing Record 163 | Moyale\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=moyale\n",
      "City not found. Skipping...\n",
      "Processing Record 164 | Aden\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=aden\n",
      "Processing Record 165 | Henties Bay\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=henties bay\n",
      "Processing Record 166 | Izazi\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=izazi\n",
      "Processing Record 167 | Kruisfontein\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kruisfontein\n",
      "Processing Record 168 | Baillif\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=baillif\n",
      "Processing Record 169 | Kysyl-Syr\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kysyl-syr\n",
      "Processing Record 170 | Cockburn Town\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=cockburn town\n",
      "Processing Record 171 | Cherskiy\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=cherskiy\n",
      "City not found. Skipping...\n",
      "Processing Record 172 | Awjilah\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=awjilah\n",
      "Processing Record 173 | Papar\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=papar\n",
      "Processing Record 174 | Hamilton\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=hamilton\n",
      "Processing Record 175 | Barrow\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=barrow\n",
      "Processing Record 176 | Pochutla\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=pochutla\n",
      "Processing Record 177 | Bud\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=bud\n",
      "Processing Record 178 | Sadovoye\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sadovoye\n",
      "Processing Record 179 | Khatanga\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=khatanga\n",
      "Processing Record 180 | Santa Cruz\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=santa cruz\n",
      "Processing Record 181 | Mahibadhoo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=mahibadhoo\n",
      "Processing Record 182 | Marsa Matruh\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=marsa matruh\n",
      "Processing Record 183 | Port Hardy\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=port hardy\n",
      "Processing Record 184 | Les Cayes\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=les cayes\n",
      "Processing Record 185 | Sao Filipe\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sao filipe\n",
      "Processing Record 186 | Aklavik\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=aklavik\n",
      "Processing Record 187 | Grenville\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=grenville\n",
      "Processing Record 188 | Marzuq\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=marzuq\n",
      "Processing Record 189 | Westport\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=westport\n",
      "Processing Record 190 | Sindor\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sindor\n",
      "Processing Record 191 | Lorengau\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=lorengau\n",
      "Processing Record 192 | Puerto Montt\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=puerto montt\n",
      "Processing Record 193 | Slavonice\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=slavonice\n",
      "Processing Record 194 | Nanpiao\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=nanpiao\n",
      "Processing Record 195 | Vila Velha\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=vila velha\n",
      "Processing Record 196 | Nabire\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=nabire\n",
      "Processing Record 197 | Monywa\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=monywa\n",
      "Processing Record 198 | Bethel\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=bethel\n",
      "Processing Record 199 | Fuling\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=fuling\n",
      "Processing Record 200 | Kommunisticheskiy\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kommunisticheskiy\n",
      "Processing Record 201 | Mataram\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=mataram\n",
      "Processing Record 202 | Monrovia\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=monrovia\n",
      "Processing Record 203 | Meulaboh\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=meulaboh\n",
      "Processing Record 204 | Klaksvik\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=klaksvik\n",
      "Processing Record 205 | Sitka\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sitka\n",
      "Processing Record 206 | Karaman\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=karaman\n",
      "Processing Record 207 | Sokoto\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sokoto\n",
      "Processing Record 208 | Ribeira Brava\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ribeira brava\n",
      "Processing Record 209 | Torbay\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=torbay\n",
      "Processing Record 210 | Kandrian\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kandrian\n",
      "Processing Record 211 | Mareeba\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=mareeba\n",
      "Processing Record 212 | Lata\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=lata\n",
      "Processing Record 213 | Ostrovnoy\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ostrovnoy\n",
      "Processing Record 214 | Brae\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=brae\n",
      "Processing Record 215 | Kattivakkam\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kattivakkam\n",
      "Processing Record 216 | Kirando\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kirando\n",
      "Processing Record 217 | Gewane\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=gewane\n",
      "Processing Record 218 | Ilulissat\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ilulissat\n",
      "Processing Record 219 | Kaitangata\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kaitangata\n",
      "Processing Record 220 | Sioux Lookout\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=sioux lookout\n",
      "Processing Record 221 | Exeter\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=exeter\n",
      "Processing Record 222 | Khabary\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=khabary\n",
      "Processing Record 223 | Puerto Escondido\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=puerto escondido\n",
      "Processing Record 224 | Kodiak\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kodiak\n",
      "Processing Record 225 | Oxelosund\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=oxelosund\n",
      "Processing Record 226 | Ormstown\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ormstown\n",
      "Processing Record 227 | Quelimane\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=quelimane\n",
      "Processing Record 228 | Lompoc\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=lompoc\n",
      "Processing Record 229 | Bodden Town\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=bodden town\n",
      "Processing Record 230 | Codrington\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=codrington\n",
      "Processing Record 231 | Kunming\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=kunming\n",
      "Processing Record 232 | Dutse\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=dutse\n",
      "Processing Record 233 | Ancud\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ancud\n",
      "Processing Record 234 | Yeppoon\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=yeppoon\n",
      "Processing Record 235 | Karratha\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=karratha\n",
      "City not found. Skipping...\n",
      "Processing Record 236 | Turayf\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=turayf\n",
      "Processing Record 237 | Mahebourg\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=mahebourg\n",
      "Processing Record 238 | Namibe\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=namibe\n",
      "Processing Record 239 | Nishihara\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=nishihara\n",
      "City not found. Skipping...\n",
      "Processing Record 240 | Shimoda\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=shimoda\n",
      "Processing Record 241 | Lasa\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=lasa\n",
      "Processing Record 242 | Victoria\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=victoria\n",
      "Processing Record 243 | Linqing\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=linqing\n",
      "Processing Record 244 | Loandjili\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=loandjili\n",
      "Processing Record 245 | Coronado\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=coronado\n",
      "Processing Record 246 | Ambilobe\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=ambilobe\n",
      "Processing Record 247 | Te Anau\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=te anau\n",
      "Processing Record 248 | Arica\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=arica\n",
      "Processing Record 249 | Thunder Bay\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=thunder bay\n",
      "Processing Record 250 | Khor\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=khor\n",
      "City not found. Skipping...\n",
      "Processing Record 251 | Gao\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=gao\n",
      "Processing Record 252 | Tazovskiy\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=tazovskiy\n",
      "City not found. Skipping...\n",
      "Processing Record 253 | Salinas\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=salinas\n",
      "Processing Record 254 | Avera\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=avera\n",
      "Processing Record 255 | Port Macquarie\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=port macquarie\n",
      "Processing Record 256 | Gizo\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=gizo\n",
      "Processing Record 257 | Tarakan\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=tarakan\n",
      "Processing Record 258 | Segamat\n",
      "http://api.openweathermap.org/data/2.5/weather?units=Imperial&APPID=709cb77279e01a90a9ee6e33119a7284&q=segamat\n"
     ]
    }
   ],
   "source": [
    "# Create empty lists to append the API data into lists \n",
    "city_name = []\n",
    "cloudiness = []\n",
    "country = []\n",
    "date = []\n",
    "humidity = []\n",
    "lat = []\n",
    "lng = []\n",
    "max_temp = []\n",
    "wind_speed = []\n",
    "\n",
    "# call counter \n",
    "record = 1\n",
    "\n",
    "# Log file \n",
    "print(f\"Beginning Data Retrieval\")\n",
    "print(f\"-------------------------------\")\n",
    "\n",
    "#Loop through the cities \n",
    "for city in cities:  \n",
    "    \n",
    "    # Try statement to append calls where value is found \n",
    "    # Not all calls return data as OpenWeatherMap will not have have records in all the cities generated by CityPy module\n",
    "    try: \n",
    "        response = requests.get(f\"{url}&q={city}\").json() \n",
    "        city_name.append(response[\"name\"])\n",
    "        cloudiness.append(response[\"clouds\"][\"all\"])\n",
    "        country.append(response[\"sys\"][\"country\"])\n",
    "        date.append(response[\"dt\"])\n",
    "        humidity.append(response[\"main\"][\"humidity\"])\n",
    "        max_temp.append(response[\"main\"][\"temp_max\"])\n",
    "        lat.append(response[\"coord\"][\"lat\"])\n",
    "        lng.append(response[\"coord\"][\"lon\"])\n",
    "        wind_speed.append(response[\"wind\"][\"speed\"])\n",
    "        city_record = response[\"name\"]\n",
    "        print(f\"Processing Record {record} | {city_record}\")\n",
    "        print(f\"{url}&q={city}\")\n",
    "        \n",
    "        # Increase counter by one \n",
    "        record= record + 1\n",
    "        \n",
    "        # Wait a second in loop to not over exceed rate limit of API\n",
    "        time.sleep(1.01)\n",
    "        \n",
    "    # If no record found \"skip\" \n",
    "    except:\n",
    "        print(\"City not found. Skipping...\")\n",
    "    continue\n",
    "    "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Convert Raw Data to DataFrame\n",
    "* Export the city data into a .csv.\n",
    "* Display the DataFrame"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    " Create a dictonary with the lists generated\n",
    "weatherpy_dict = {\n",
    "    \"City\": city_name,\n",
    "    \"Cloudiness\":cloudiness, \n",
    "    \"Country\":country,\n",
    "    \"Date\":date, \n",
    "    \"Humidity\": humidity,\n",
    "    \"Lat\":lat, \n",
    "    \"Lng\":lng, \n",
    "    \"Max Temp\": max_temp,\n",
    "    \"Wind Speed\":wind_speed\n",
    "}\n",
    "\n",
    "# Create a data frame \n",
    "weather_data = pd.DataFrame(weatherpy_dict)\n",
    "\n",
    "# Display count of weather data values \n",
    "weather_data.count()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Save data frame to CSV\n",
    "weather_data.to_csv('Output_CSV/weather_data.csv')\n",
    "\n",
    "# Display data frame head \n",
    "weather_data.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Plotting the Data\n",
    "* Use proper labeling of the plots using plot titles (including date of analysis) and axes labels.\n",
    "* Save the plotted figures as .pngs."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Latitude vs. Temperature Plot"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Build a scatter plot \n",
    "plt.scatter(weather_data[\"Lat\"], weather_data[\"Max Temp\"], marker=\"o\", s=10)\n",
    "\n",
    "# Incorporate the other graph properties\n",
    "plt.title(\"City Latitude vs. Max Temperature\")\n",
    "plt.ylabel(\"Max. Temperature (F)\")\n",
    "plt.xlabel(\"Latitude\")\n",
    "plt.grid(True)\n",
    "\n",
    "# Save the figure\n",
    "plt.savefig(\"Output_Plots/Max_Temp_vs_Latitude.png\")\n",
    "\n",
    "# Show plot\n",
    "plt.show()\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Latitude vs. Humidity Plot"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Build a scatter plot \n",
    "plt.scatter(weather_data[\"Lat\"], weather_data[\"Humidity\"], marker=\"o\", s=10)\n",
    "\n",
    "# Incorporate the other graph properties\n",
    "plt.title(\"City Latitude vs. Humidity\")\n",
    "plt.ylabel(\"Humidity (%)\")\n",
    "plt.xlabel(\"Latitude\")\n",
    "plt.grid(True)\n",
    "\n",
    "# Save the figure\n",
    "plt.savefig(\"Output_Plots/Humidity_vs_Latitude.png\")\n",
    "\n",
    "# Show plot\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Latitude vs. Cloudiness Plot"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Build a scatter plot \n",
    "plt.scatter(weather_data[\"Lat\"], weather_data[\"Cloudiness\"], marker=\"o\", s=10)\n",
    "\n",
    "# Incorporate the other graph properties\n",
    "plt.title(\"City Latitude vs. Cloudiness\")\n",
    "plt.ylabel(\"Cloudiness (%)\")\n",
    "plt.xlabel(\"Latitude\")\n",
    "plt.grid(True)\n",
    "\n",
    "# Save the figure\n",
    "plt.savefig(\"Output_Plots/Cloudiness_vs_Latitude.png\")\n",
    "\n",
    "# Show plot\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Latitude vs. Wind Speed Plot"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Build a scatter plot \n",
    "plt.scatter(weather_data[\"Lat\"], weather_data[\"Wind Speed\"], marker=\"o\", s=10)\n",
    "\n",
    "# Incorporate the other graph properties\n",
    "plt.title(\"City Latitude vs. Wind Speed\")\n",
    "plt.ylabel(\"Wind Speed (mph)\")\n",
    "plt.xlabel(\"Latitude\")\n",
    "plt.grid(True)\n",
    "\n",
    "# Save the figure\n",
    "plt.savefig(\"Output_Plots/Wind_Speed_vs_Latitude.png\")\n",
    "\n",
    "# Show plot\n",
    "plt.show()"
   ]
  }
 ],
 "metadata": {
  "anaconda-cloud": {},
  "kernel_info": {
   "name": "python3"
  },
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.3"
  },
  "nteract": {
   "version": "0.12.3"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
